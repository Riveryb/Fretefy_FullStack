<div class="container">
  <div style="display:flex; align-items:center; justify-content:space-between; margin-bottom:16px;">
    <h2 class="page-title" style="margin:0">Regiões</h2>

    <a routerLink="/regiao/novo" class="btn-cadastrar">Cadastrar</a>
  </div>

  <div class="card table-wrap">
    <table class="table">
      <thead>
        <tr>
          <th>Nome da região</th>
          <th>Status</th>
          <th>Cidades</th>
          <th style="width:64px; text-align:right;">Ações</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let r of (regioes$ | async) || []">
          <td>{{ r.nome }}</td>
          <td>
            <span [style.color]="r.ativo ? '#167d2e' : '#8a1f1f'">
              {{ r.ativo ? 'Ativo' : 'Inativo' }}
            </span>
          </td>
          <td>
            <ng-container *ngIf="r.regiaoCidades?.length; else sem">
              <ng-container *ngFor="let rc of r.regiaoCidades; let last = last">
                {{ rc.cidade?.nome }}/{{ rc.cidade?.uf }}<span *ngIf="!last"> | </span>
              </ng-container>
            </ng-container>
            <ng-template #sem>-</ng-template>
          </td>
          <td style="text-align:right;">
            <details class="kebab">
              <summary class="kebab-btn" aria-label="Ações">
                <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
                  <circle cx="12" cy="5" r="2"/><circle cx="12" cy="12" r="2"/><circle cx="12" cy="19" r="2"/>
                </svg>
              </summary>
              <div class="menu">
                <a [routerLink]="['/regiao', r.id, 'editar']">Editar</a>
                <button *ngIf="r.ativo" class="btn-ghost" (click)="desativar(r)">Desativar</button>
                <button *ngIf="!r.ativo" class="btn-ghost" (click)="ativar(r)">Ativar</button>
              </div>
            </details>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
