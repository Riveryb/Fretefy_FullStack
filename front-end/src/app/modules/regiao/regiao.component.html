<div style="padding:16px">
  <div style="display:flex; align-items:center; gap:12px; margin-bottom:12px;">
    <h2 style="margin:0;">Regiões</h2>
    <div>
      <a routerLink="/regiao/novo">+ Cadastrar</a>
    </div>
  </div>

  <table border="1" width="100%" cellspacing="0" cellpadding="8">
    <thead>
      <tr>
        <th align="left">Nome da região</th>
        <th align="left">Status</th>
        <th align="left">Cidades</th>
        <th align="left" style="width:210px;">Ações</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let r of (regioes$ | async) || []">
        <td>{{ r.nome }}</td>
        <td>{{ r.ativo ? 'Ativo' : 'Inativo' }}</td>
        <td>
          <ng-container *ngIf="r.regiaoCidades && r.regiaoCidades.length; else sem">
            <ng-container *ngFor="let rc of r.regiaoCidades; let last = last">
              {{ rc.cidade?.nome }}/{{ rc.cidade?.uf }}<span *ngIf="!last"> | </span>
            </ng-container>
          </ng-container>
          <ng-template #sem>-</ng-template>
        </td>
        <td>
          <a [routerLink]="['/regiao', r.id, 'editar']">Editar</a>
          <button *ngIf="r.ativo" (click)="desativar(r)" style="margin-left:8px;">Desativar</button>
          <button *ngIf="!r.ativo" (click)="ativar(r)" style="margin-left:8px;">Ativar</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
